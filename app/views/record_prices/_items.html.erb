<p>
  <input type="button" class="button affirmative add-record-price-item" value="Adicionar Material">
</p>

<div id="record-price-items">
  <%= f.association :items, :collection => localized(f.object.items) do |p| %>
    <%= render 'record_price_items/form', :f => p %>
  <% end %>

  <%= mustache 'record-price-items-template' do %>
    <%= f.association :items_attributes, :collection => f.object.items.build, :index => '{{uuid_record_price_item}}' do |p| %>
      <%= render 'record_price_items/form', :f => p %>
    <% end %>
  <% end %>
</div>

<script>
  $("#record-price-items-template").nestedForm({
    add: '.add-record-price-item',
    remove: '.remove-record-price-item',
    target: '#record-price-items',
    uuid: 'uuid_record_price_item',
    fieldToRemove: '.record-price-item',
    appendItem: false
  });
</script>
