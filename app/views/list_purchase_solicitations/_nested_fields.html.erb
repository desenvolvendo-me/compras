<%= f.input :purchase_solicitation,:required => true, :as => :auto_complete, :fake => true,
            'data-hidden-field-class' => 'unique',:input_html => {} %>

<div class="yui3-g">
  <div class="yui3-u-1-3">
    <%= f.input :consumed_value, :as => :fake,
                :input_html => { 'data-decimal' => true, :value => '0,00', 'data-precision' => 2, :maxlength => 15, :class => 'numeric' } %>
  </div>

  <div class="yui3-u-1-3">
    <%= f.input :expected_value, :as => :fake,
                :input_html => { 'data-decimal' => true, :value => '0,00', 'data-precision' => 2, :maxlength => 15, :class => 'numeric' } %>
  </div>

  <div class="yui3-u-1-3">
    <%= f.input :resource_source, :as => :fake %>
  </div>

</div>

<script>

    // esse js ta resolvendo um bug que deu na aplicação,
    //     a mascara com pra numbem (ex.:1.200,00) não estava funcionando
    // como deveria, como tambem o update pois estava acrescentando
    // uma casa decimal a mais (salvava 1 e para o banco aumentava
    // um 0 em todo update), esse correção é feita no model
    // list_purchase_solicitation,linha 11
    function convert(number){
        return (Number(number)).toLocaleString("pt-BR", {
            minimumFractionDigits: 2,maximumFractionDigits: 2
        });
    }

    $(function() {

        $("#list_purchase_solicitations_records tbody tr td").each(function() {
            if ( $(this).attr('class') == "consumed_value" || $(this).attr('class') == "expected_value"){
                $(this).text((convert($(this).text())));
            }
        });

        $('#list_purchase_solicitations_records .edit-nested-record').click(function(){
            setTimeout(function(){
                consumed_value = $('#licitation_process_consumed_value').val();
                expected_value = $('#licitation_process_expected_value').val();
                $('#licitation_process_consumed_value').val(convert(consumed_value));
                $('#licitation_process_expected_value').val(convert(expected_value));
            }, 100);
        });
    });

</script>