<%= f.input :price_collection_proposals, as: :nested_grid, columns: [:creditor, :email] %>

<script>
  $('#price_collection_creditor_id').on('change', function (event, creditor) {
    if(creditor){
      $('#price_collection_email').val(creditor.email || creditor.person_email);

      if ($('#price_collection_email').val() == ""){
        $('#price_collection_email').removeAttr('disabled');
      }
    }
  });

  $('#price_collection_creditor_id').on('change', function (event, creditor) {
    var emailInput = $('.nested-fields').find('input[name="price_collection[email]"]');
    emailInput.val(creditor.email || creditor.person_email);

    if(creditor.email){
      emailInput.attr('disabled', true);
    }
  });
</script>
