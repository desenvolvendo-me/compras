<%= grouped_fields_tag "Dados gerais" do %>
  <%= render 'main', :f => f %>
<% end %>

<%= grouped_fields_tag "Estoque" do %>
  <%= render 'stock', :f => f %>
<% end %>

<script>
  $("#material_material_type").change(function() {
    changeFieldsByMaterialType();
    setControlAmount();
  });

  function changeFieldsByMaterialType() {
    typeValue = $("#material_material_type").val();

    if (typeValue == "<%= MaterialType::CONSUMPTION %>" || typeValue == "<%= MaterialType::ASSET %>") {
      $("#material_service_or_contract_type").attr('disabled', true)
                                             .requiredField(false);
    } else if (typeValue == "<%= MaterialType::SERVICE %>") {
      $("#material_contract_type").attr('disabled', false).requiredField(true);
    }
  };

  function setControlAmount() {
    var controlAmount = $('.control-amount'),
        materialType = $("#material_material_type").val();

    if (typeValue == "<%= MaterialType::SERVICE %>") {
      controlAmount.show();
    } else {
      controlAmount.find(':input').removeAttr('checked');
      controlAmount.hide();
    }
  }

  (function(){
    changeFieldsByMaterialType();
    setControlAmount();
  })();
</script>
