<%= a.input :addressable_id, :as => :hidden %>
<%= a.input :addressable_type, :as => :hidden %>

<div class="yui3-g">
  <div class="yui3-u-1-2">
    <%= a.input :street, :as => :select2, :required => true %>
  </div>
</div>

<div class="yui3-g">
  <div class="yui3-u-1-4">
    <%= a.input :number %>
  </div>

  <div class="yui3-u-1-2">
    <%= a.input :block %>
  </div>
</div>

<div class="yui3-g">
  <div class="yui3-u-1-4">
    <%= a.input :room %>
  </div>

  <div class="yui3-u-1-2">
    <%= a.input :complement %>
  </div>
</div>

<div class="yui3-g">
  <div class="yui3-u-1-2">
    <%= a.input :neighborhood, as: :select2 %>
  </div>

  <div class="yui3-u-1-2">
    <%= a.input :condominium %>
  </div>
</div>

<%= a.input :land_subdivision %>

<%= a.input :district, :disabled => true %>

<div class="yui3-g">
  <div class="yui3-u-1-2">
    <%= a.input :city, :disabled => true %>
  </div>

  <div class="yui3-u-1-4">
    <%= a.input :state, :disabled => true %>
  </div>

  <div class="yui3-u-1-4">
    <%= a.input :zip_code %>
  </div>
</div>

<script>
    $("#<%= a.sanitized_object_name %>_street_id").change(function (event, street) {
        console.log(street)
        if (street) {
            var modal_url = "<%= modal_neighborhoods_path %>?",
                params = $.param({
                    street_id: street.id,
                    neighborhood: {
                        city: street.city,
                        city_id: street.city_id
                    },
                    locked_fields: ["city"]
                });

            modal_url += params;

            $("#<%= a.sanitized_object_name %>_neighborhood").data("modal-url", modal_url).val("");

            $("#<%= a.sanitized_object_name %>_neighborhood_id").val("");
        }

        if ($(this).val()) {
            $("#<%= a.sanitized_object_name %>_neighborhood").attr("disabled", false);
        } else {
            $("#<%= a.sanitized_object_name %>_neighborhood").attr("disabled", true);
        }
    }).change();

    $("#<%= a.sanitized_object_name %>_neighborhood_id").change(function (event, neighborhood) {
        if (neighborhood) {
            $("#<%= a.sanitized_object_name %>_city").val(neighborhood.city);
            $("#<%= a.sanitized_object_name %>_state").val(neighborhood.state);
        }
    });
</script>
