<%= f.input :sequential_number, as: :hidden %>
<div class="yui3-g">
  <div class='yui3-u-1-4'>
    <%= f.input :type %>
  </div>

  <div class='yui3-u-1-4'>
    <%= f.input :year %>
  </div>

  <div class='yui3-u-1-4'>
    <%= f.input :contract_number %>
  </div>
  <div class='yui3-u-1-4'>
    <%= f.input :balance_control_type %>
  </div>
</div>

<div class="yui3-g">
  <div class='yui3-u-1-4'>
    <%= f.input :consortium_agreement %>
  </div>
  <div class='yui3-u-1-4'>
    <%= f.input :balance %>
  </div>
</div>


<div class="yui3-g">
  <div class='yui3-u-1-2'>
    <%= f.input :licitation_process %>
  </div>
  <div class='yui3-u-1-2'>
    <%= f.input :creditor, as: :auto_complete, data_source: creditors_path %>
  </div>
</div>

<div class="yui3-g">
  <div class="yui3-u-2-5">
    <%= f.input :parent %>
  </div>
  <div class="yui3-u-1-5">
    <%= f.input :publication_date %>
  </div>

  <div class="yui3-u-2-5">
    <%= f.input :dissemination_source %>
  </div>
</div>
<%= f.input :management_object, as: :auto_complete %>
<label class="label_link">
  <span>Objeto do Contrato <abbr title="obrigatÃ³rio">*</abbr></span>
  <span class="d-flex">
    <%= f.input :contract_file, label:false%>
    <%= link_to f.object.contract_file_identifier, f.object.contract_file_url, :target => '_blank', class:'ml-1' if f.object.contract_file? %>
  </span>
</label>
<%= f.input :content, label: false %>

<div class="yui3-g">
  <div class='yui3-u-1-2'>
    <%= f.input :contract_type %>
  </div>
  <div class='yui3-u-1-2'>
    <%= f.input :subcontracting, :as => :select %>
  </div>
</div>

<div class="yui3-g">
  <div class='yui3-u-1-4'>
    <%= f.input :contract_value %>
  </div>
  <div class='yui3-u-1-4'>
    <%= f.input :default_fine %>
  </div>
  <div class='yui3-u-1-4'>
    <%= f.input :penalty_fine %>
  </div>
  <div class='yui3-u-1-4'>
    <%= f.input :guarantee_value %>
  </div>
</div>

<div class="yui3-g">
  <div class='yui3-u-1-4'>
    <%= f.input :signature_date %>
  </div>

  <div class='yui3-u-1-4'>
    <%= f.input :contract_validity, :hint => 'mes(es)' %>
  </div>

  <div class='yui3-u-1-4'>
    <%= f.input :start_date %>
  </div>

  <div class='yui3-u-1-4'>
    <%= f.input :end_date %>
  </div>
</div>


<div class='yui3-g'>
  <div class='yui3-u-1-4'>
    <%= f.input :cancellation_date %>
  </div>

  <div class='yui3-u-3-4'>
    <%= f.input :cancellation_reason %>
  </div>
</div>


<div class='yui3-g'>
  <div class='yui3-u-1-3'>
    <%= f.input :execution_type %>
  </div>

  <div class='yui3-u-1-3'>
    <%= f.input :contract_guarantees %>
  </div>

  <div class='yui3-u-1-3'>
    <%= f.input :modality_humanize, :disabled => true %>
  </div>
</div>

<div class='yui3-g'>
  <div class='yui3-u-1-2'>
    <%= f.input :purchasing_unit %>
  </div>

  <div class='yui3-u-1-2'>
    <%= f.input :budget_structure_responsible %>
  </div>
</div>

<div class='yui3-g'>
  <div class='yui3-u-1-2'>
    <%= f.input :lawyer %>
  </div>

  <div class='yui3-u-1-2'>
    <%= f.input :lawyer_code %>
  </div>
</div>

<%= f.input :description %>


<div id="creditor-dialog" title="Selecione o Fornecedor">
  <table id='choose-creditor' class="records">
    <tbody>

    </tbody>
  </table>

</div>



<script>
  var clearModalityExecutionType = function () {
    $('#contract_modality_humanize').val('');
    $('#contract_execution_type').val('');
    $('#contract_execution_type_humanize').val('');
    $('#contract_contract_guarantees').val('');
    $('#contract_contract_guarantees_humanize').val('');
  };

  $('form').on('change', '#contract_year, #contract_entity_id', function (event) {
    $.getJSON('<%= next_sequential_contracts_path %>?year=' + $('#contract_year').val() + '&entity_id=' + $('#contract_entity_id').val(), function (data) {
      $('#contract_sequential_number').val(data.sequential);
    });
  });

  $(function(){
    <%if f.object.supply_requests.present? || f.object.supply_orders.present?  %>
    $("#contract_creditor").prop('disabled', 'disabled');
    <% end %>
  })
</script>

<style>
  .label_link{
    display: flex !important;
    justify-content: space-between;
  }
  label.label_link{
    height: 20px;
  }
  .ml-1{
    margin-left: 1rem;
  }

  #creditor-dialog tr{
    cursor: pointer;
  }
</style>